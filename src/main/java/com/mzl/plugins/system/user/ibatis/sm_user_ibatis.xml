<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">

  <parameterMap id="user" type="com.mzl.plugins.system.user.entity.Account" />
  
  <resultMap id="userResult" type="com.mzl.plugins.system.user.entity.Account">
    <result property="id" column="ID" javaType="java.lang.Long" />
    <result property="account" column="Account" />
  </resultMap>
  
	<select id="querySingleAccount" parameterType="String" resultMap="userResult">
		select
		*
		from SM_User where Account=#{account}
	</select>

	<select id="getRecordCount" parameterMap="user" resultType="long">
		select count(1) from sm_user
	</select>
	
	<select id="getPaginatedList" parameterMap="user" resultMap="userResult">
		select * from sm_user limit ${start},${offset}
	</select>
	
	<insert id="insert" parameterMap="user">
		INSERT INTO sm_user
		<trim prefix="(" prefixOverrides="," suffix=")">
			<if test="account !=null and  account!=''">,Account</if>
			<if test="password !=null and  password!=''">,Password</if>
		</trim>
		values
		<trim prefix="(" prefixOverrides="," suffix=")">
			<if test="account !=null and  account!=''">,#{account}</if>
			<if test="password !=null and  password!=''">,#{password}</if>
		</trim>
		<selectKey keyProperty="generatedKey" resultType="Long">
			select LAST_INSERT_ID() as generatedKey     
		</selectKey>
	</insert>
	
	<select id="select_one" parameterMap="user" resultMap="userResult">
		select
		*
		from SM_User where ID=#{id}
	</select>
	
	<!-- 角色更新 -->
	<update id="update" parameterMap="user">
		update SM_User
		<set>
			<trim prefixOverrides=",">
				<if test="account !=null and  account!=''">,Account=#{account}</if>
				<if test="password !=null and  password!=''">,Password=#{password}</if>
			</trim>
		</set>
		where ID = ${id}
	</update>
	
	<delete id="delete" parameterMap="user">
		delete from SM_User where ID = ${id} 
	</delete>
</mapper>